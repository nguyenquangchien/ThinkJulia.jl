[[chap04]]
== NghiÃªn cá»©u cá»¥ thá»ƒ: thiáº¿t káº¿ giao diá»‡n

ChÆ°Æ¡ng nÃ y trÃ¬nh bÃ y má»™t nghiÃªn cá»©u cá»¥ thá»ƒ nháº±m biá»ƒu diá»…n quÃ¡ trÃ¬nh thiáº¿t káº¿ cÃ¡c hÃ m Ä‘á»ƒ chÃºng lÃ m viá»‡c vá»›i nhau.

ChÆ°Æ¡ng giá»›i thiá»‡u Ä‘á»“ há»a rÃ¹a, má»™t cÃ¡ch láº­p trÃ¬nh táº¡o nÃªn cÃ¡c báº£n váº½. Äá»“ há»a rÃ¹a khÃ´ng cÃ³ trong thÆ° viá»‡n chuáº©n, nÃªn báº¡n cáº§n bá»• sung module ThinkJulia vÃ o vá»›i thiáº¿t láº­p Julia trÃªn mÃ¡y báº¡n.

CÃ³ thá»ƒ thá»±c thi cÃ¡c vÃ­ dá»¥ trong chÆ°Æ¡ng nÃ y trong má»™t sá»• tÃ­nh Ä‘Ã´ há»a trÃªn JuliaBox, mÃ´i trÆ°á»ng káº¿t há»£p mÃ£ lá»‡nh, cÃ¡c dÃ²ng chá»¯ Ä‘á»‹nh dáº¡ng, cÃ´ng thá»©c toÃ¡n há»c vÃ  Ä‘a phÆ°Æ¡ng tiá»‡n, táº¥t cáº£ trong má»™t vÄƒn báº£n (xem <<juliabox>>).
(((JuliaBox, sá»• tÃ­nh Ä‘á»“ há»a)))


=== Turtles

_Module_ lÃ  má»™t file chá»©a má»™t nhÃ³m cÃ¡c hÃ m liÃªn quan. Julia cáº¥p sáºµn má»™t sá»‘ module trong thÆ° viá»‡n chuáº©n. CÃ³ thá»ƒ bá»• sung thÃªm cÃ¡c tÃ­nh nÄƒng tá»« má»™t táº­p há»£p cÃ¡c _gÃ³i_ khÃ´ng ngá»«ng Ä‘Æ°á»£c phÃ¡t triá»ƒn (https://juliaobserver.com).
(((module)))(((gÃ³i)))

CÃ³ thá»ƒ cÃ i Ä‘áº·t cÃ¡c gÃ³i trong REPL khi vÃ o cháº¿ Ä‘á»™ Pkg REPL báº±ng cÃ¡ch nháº¥n phÃ­m +]+.
(((pass:[&#93;])))(((ThinkJulia)))((("module", "ThinkJulia", see="ThinkJulia")))

[source,jlcon]
----
(v1.0) pkg> add https://github.com/BenLauwens/ThinkJulia.jl
----

Viá»‡c nÃ y cÃ³ thá»ƒ tá»‘n chÃºt thá»i gian.

TrÆ°á»›c khi sá»­ dá»¥ng Ä‘Æ°á»£c cÃ¡c hÃ m trong má»™t module, báº¡n cáº§n nháº­p module vá»›i lá»‡nh +using+:
(((using)))((("tá»« khÃ³a", "using", see="using")))(((using statement)))((("lá»‡nh", "using", see="using (lá»‡nh)")))

[source,@julia-repl-test]
----
julia> using ThinkJulia

julia> ğŸ¢ = Turtle()
Luxor.Turtle(0.0, 0.0, true, 0.0, (0.0, 0.0, 0.0))
----

Module +ThinkJulia+ cung cáº¥p má»™t hÃ m cÃ³ tÃªn +Turtle+ Ä‘á»ƒ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng +Luxor.Turtle+, mÃ  ta sáº½ gÃ¡n cho biáº¿n tÃªn lÃ  +ğŸ¢+ (*+\:turtle: TAB+*).
(((Turtle)))((("type", "Luxor", "Turtle", see="Turtle")))

Má»™t khi Ä‘Ã£ táº¡o ra con rÃ¹a, báº¡n cÃ³ thá»ƒ gá»i cÃ¡c hÃ m Ä‘á»ƒ di chuyá»ƒn nÃ³ trong báº£n váº½. Cháº³ng háº¡n, Ä‘á»ƒ cho rÃ¹a Ä‘i tiáº¿n:
(((forward)))((("hÃ m", "ThinkJulia", "forward", see="forward")))

[source,julia]
----
@svg begin
    forward(ğŸ¢, 100)
end
----

[[fig04-1]]
.Cho rÃ¹a Ä‘i tiáº¿n
image::images/fig41.svg[]


Tá»« khÃ³a +@svg+ cháº¡y má»™t macro Ä‘á»ƒ váº½ nÃªn hÃ¬nh SVG. Macro lÃ  tÃ­nh nÄƒng quan trá»ng nhÆ°ng lÃ  kiáº¿n thá»©c nÃ¢ng cao trong Julia.
(((@svg)))((("macro", "Luxor", "@svg", see="@svg")))(((macro)))(((hÃ¬nh SVG)))

CÃ¡c Ä‘á»‘i sá»‘ cho +forward+ lÃ  con rÃ¹a vÃ  khoáº£ng cÃ¡ch tÃ­nh theo Ä‘iá»ƒm áº£nh (pixel), vÃ¬ váº­y kÃ­ch thÆ°á»›c thá»±c sáº½ phá»¥ thuá»™c vÃ o mÃ n hÃ¬nh mÃ¡y tÃ­nh báº¡n.

Má»™t hÃ m khÃ¡c báº¡n cÃ³ thá»ƒ gá»i mÃ  nháº­n rÃ¹a lÃ m Ä‘á»‘i sá»‘ lÃ  +turn+; hÃ m nÃ y Ä‘á»ƒ quay con rÃ¹a. Äá»‘i sá»‘ thá»© hai cho +turn+ lÃ  gÃ³c tÃ­nh báº±ng Ä‘á»™.
(((turn)))((("hÃ m", "ThinkJulia", "turn", see="turn")))

NgoÃ i ra, má»—i con rÃ¹a Ä‘á»u náº¯m má»™t cÃ¢y bÃºt, bÃºt nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c nháº¥c hoáº·c háº¡; náº¿u háº¡ bÃºt xuá»‘ng, rÃ¹a sáº½ Ä‘á»ƒ láº¡i nÃ©t váº½ khi nÃ³ di chuyá»ƒn. <<fig04-1>> cho tháº¥y náº¿t váº½ Ä‘á»ƒ láº¡i phÃ­a sau con rÃ¹a. CÃ¡c hÃ m +penup+ vÃ  +pendown+ tÆ°Æ¡ng á»©ng vá»›i nháº¥c bÃºt hoáº·c háº¡ bÃºt.
(((penup)))((("hÃ m", "ThinkJulia", "penup", see="penup")))(((pendown)))((("hÃ m", "ThinkJulia", "pendown", see="pendown")))

Äá»ƒ váº½ má»™t gÃ³c vuÃ´ng, hÃ£y sá»­a láº¡i lá»i gá»i macro:

[source,julia]
----
ğŸ¢ = Turtle()
@svg begin
    forward(ğŸ¢, 100)
    turn(ğŸ¢, -90)
    forward(ğŸ¢, 100)
end
----

===== BÃ i táº­p 4-1

BÃ¢y giá» hÃ£y chá»‰nh sá»­a macro Ä‘á»ƒ váº½ má»™t hÃ¬nh vuÃ´ng. Xin Ä‘á»«ng Ä‘á»c tiáº¿p trÆ°á»›c khi báº¡n hoÃ n thÃ nh chÆ°Æ¡ng trÃ¬nh nÃ y!


[[simple_repetition]]
=== CÃ¡ch láº·p láº¡i Ä‘Æ¡n giáº£n

ÄÃ´i khi báº¡n viáº¿t mÃ£ lá»‡nh kiá»ƒu nhÆ° sau:
(((láº·p láº¡i)))

[source,julia]
----
ğŸ¢ = Turtle()
@svg begin
    forward(ğŸ¢, 100)
    turn(ğŸ¢, -90)
    forward(ğŸ¢, 100)
    turn(ğŸ¢, -90)
    forward(ğŸ¢, 100)
    turn(ğŸ¢, -90)
    forward(ğŸ¢, 100)
end
----

ChÃºng ta cÃ³ thá»ƒ lÃ m viá»‡c nÃ y báº±ng cÃ¡ch viáº¿t gá»n hÆ¡n vá»›i má»™t lá»‡nh +for+:
(((lá»‡nh for)))((("lá»‡nh", "for", see="lá»‡nh for")))(((for)))((("tá»« khÃ³a", "for", see="for")))(((in)))((("tá»« khÃ³a", "in", see="in")))

[source,@julia-repl-test]
----
julia> for i in 1:4
          println("Hello!")
       end
Hello!
Hello!
Hello!
Hello!
----

ÄÃ¢y lÃ  cÃ¡ch dÃ¹ng lá»‡nh +for+ Ä‘Æ¡n giáº£n nháº¥t; sau nÃ y chÃºng ta sáº½ tÃ¬m hiá»ƒu thÃªm. NhÆ°ng chá»‰ báº±ng cÃ¡ch Ä‘Æ¡n giáº£n nÃ y cÅ©ng Ä‘á»§ Ä‘á»ƒ viáº¿t láº¡i chÆ°Æ¡ng trÃ¬nh váº½ hÃ¬nh vuÃ´ng. Xin Ä‘á»«ng Ä‘á»c tiáº¿p trÆ°á»›c khi báº¡n hoÃ n thÃ nh chÆ°Æ¡ng trÃ¬nh.

ÄÃ¢y lÃ  cÃ¡ch dÃ¹ng má»™t lá»‡nh +for+ Ä‘á»ƒ váº½ hÃ¬nh vuÃ´ng:

[source,julia]
----
ğŸ¢ = Turtle()
@svg begin
    for i in 1:4
        forward(ğŸ¢, 100)
        turn(ğŸ¢, -90)
    end
end
----

CÃº phÃ¡p cá»§a lá»‡nh +for+ cÅ©ng tÆ°Æ¡ng tá»± nhÆ° má»™t Ä‘á»‹nh nghÄ©a hÃ m. NÃ³ gá»“m cÃ³ má»™t pháº§n Ä‘áº§u káº¿t thÃºc bá»Ÿi dáº¥u hai cháº¥m vÃ  má»™t pháº§n thÃ¢n Ä‘Æ°á»£c viáº¿t thá»¥t vÃ o so vá»›i lá». Pháº§n thÃ¢n cÃ³ thá»ƒ chá»©a bao nhiÃªu cÃ¢u lá»‡nh cÅ©ng Ä‘Æ°á»£c.
(((end)))

Má»™t cÃ¢u lá»‡nh +for+ Ä‘Ã´i khi cÃ²n Ä‘Æ°Æ¡c gá»i lÃ  má»™t _vÃ²ng láº·p_ vÃ¬ dÃ²ng thá»±c hiá»‡n sáº½ Ä‘i xuÃ´i theo pháº§n thÃ¢n vÃ  vÃ²ng ngÆ°á»£c trá»Ÿ láº¡i Ä‘áº§u. Trong vÃ­ dá»¥ trÃªn, pháº§n thÃ¢n Ä‘Æ°á»£c cháº¡y qua bá»‘n láº§n.
(((vÃ²ng láº·p)))

Thá»±c ra phiÃªn báº£n mÃ£ lá»‡nh nÃ y hÆ¡i khÃ¡c vá»›i cÃ¡c báº£n váº½ hÃ¬nh vuÃ´ng trÆ°á»›c Ä‘Ã³ á»Ÿ chá»— nÃ³ thá»±c hiá»‡n má»™t láº§n ráº½ ná»¯a sau khi váº½ cáº¡nh cuá»‘i cÃ¹ng cá»§a hÃ¬nh vuÃ´ng. Láº§n ráº½ dÆ° thá»«a nÃ y lÃ m thá»i gian cháº¡y lÃ¢u hÆ¡n má»™t chÃºt, nhÆ°ng nÃ³ Ä‘Æ¡n giáº£n hoÃ¡ mÃ£ lá»‡nh náº¿u chÃºng ta cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c cÃ´ng viá»‡c giá»‘ng nhau báº±ng vÃ²ng láº·p. PhiÃªn báº£n nÃ y cÅ©ng cÃ³ tÃ¡c dá»¥ng Ä‘Æ°a con rÃ¹a vá» tráº¡ng thÃ¡i khá»Ÿi Ä‘áº§u, Ä‘áº·t nÃ³ vá» hÆ°á»›ng xuáº¥t phÃ¡t.


=== BÃ i táº­p

Tiáº¿p theo Ä‘Ã¢y lÃ  má»™t loáº¡t cÃ¡c bÃ i táº­p cÃ³ sá»­ dá»¥ng con rÃ¹a. ChÃºng cÃ³ má»¥c Ä‘Ã­ch riÃªng ngoÃ i viá»‡c giáº£i trÃ­. Khi lÃ m cÃ¡c bÃ i táº­p nÃ y, báº¡n hÃ£y nghÄ© xem má»¥c Ä‘Ã­ch riÃªng Ä‘Ã³ lÃ  gÃ¬.

[TIP]
====
BÃªn cáº¡nh cÃ¡c bÃ i táº­p cÃ²n cÃ³ lá»i giáº£i. Báº¡n hÃ£y cá»‘ hoÃ n thÃ nh (hoáº·c Ã­t nháº¥t lÃ  ná»— lá»±c lÃ m) cÃ¡c bÃ i táº­p trÆ°á»›c khi xem qua lá»i giáº£i nÃ y.
====

[[ex04-1]]
===== BÃ i táº­p 4-2

HÃ£y viáº¿t má»™t hÃ m cÃ³ tÃªn +square+ nháº­n má»™t tham sá»‘ tÃªn +t+, vá»‘n lÃ  má»™t con rÃ¹a. HÃ m nÃ y dÃ¹ng con rÃ¹a Ä‘á»ƒ váº½ má»™t hÃ¬nh vuÃ´ng.

[[ex04-2]]
===== BÃ i táº­p 4-3

Viáº¿t má»™t lá»i gá»i hÃ m nháº±m má»¥c Ä‘Ã­ch truyá»n +t+ nhÆ° má»™t Ä‘á»‘i sá»‘ cho +square+, vÃ  sau Ä‘Ã³ cháº¡y láº¡i chÆ°Æ¡ng trÃ¬nh.

[[ex04-3]]
===== BÃ i táº­p 4-4

ThÃªm má»™t tham sá»‘ ná»¯a cÃ³ tÃªn +len+, cho square. Sá»­a Ä‘á»•i pháº§n thÃ¢n cá»§a sao cho chiá»u dÃ i cáº¡nh lÃ  +len+, rá»“i sá»­a Ä‘á»•i lá»i gá»i hÃ m Ä‘á»ƒ cung cáº¥p cho má»™t Ä‘á»‘i sá»‘ thá»© hai. Cháº¡y láº¡i macro nÃ y. Thá»­ chÆ°Æ¡ng trÃ¬nh vá»›i má»™t loáº¡t cÃ¡c giÃ¡ trá»‹ cá»§a +len+.

[[ex04-4]]
===== BÃ i táº­p 4-5

Táº¡o má»™t báº£n sao cá»§a +square+ vÃ  Ä‘á»•i tÃªn thÃ nh +polygon+. ThÃªm má»™t tham sá»‘ cÃ³ tÃªn lÃ  +n+ vÃ  sá»­a Ä‘á»•i pháº§n thÃ¢n Ä‘á»ƒ nÃ³ váº½ má»™t hÃ¬nh Ä‘a giÃ¡c Ä‘á»u cÃ³ latexmath:[\(n\)] cáº¡nh. 

[TIP]
====
CÃ¡c gÃ³c ngoÃ i cá»§a má»™t hÃ¬nh latexmath:[\(n\)]-giÃ¡c Ä‘á»u cÃ¹ng báº±ng latexmath:[\(\frac{360}{n}\)] Ä‘á»™.
====

[[ex04-5]]
===== BÃ i táº­p 4-6

Viáº¿t má»™t hÃ m cÃ³ tÃªn lÃ  +circle+ nháº­n vÃ o rÃ¹a +t+, vÃ  bÃ¡n kÃ­nh, +r+, nhÆ° lÃ  hai tham sá»‘. HÃ m nÃ y thá»±c hiá»‡n váº½ gáº§n chÃ­nh xÃ¡c má»™t Ä‘Æ°á»ng trÃ²n báº±ng cÃ¡ch gá»i hÃ m +polygon+  vá»›i cÃ¡c giÃ¡ trá»‹ phÃ¹ há»£p cho chiá»u dÃ i cáº¡nh vÃ  sá»‘ cáº¡nh. Thá»­ láº¡i hÃ m cá»§a báº¡n vá»›i má»™t loáº¡t cÃ¡c giÃ¡ trá»‹ cá»§a +r+. 

[TIP]
====
HÃ¬nh dung ra Ä‘á»™ dÃ i chu vi Ä‘Æ°á»ng trÃ²n vÃ  Ä‘áº£m báº£o ráº±ng +len * n == circumference+ (chu vi).
====

[[ex04-6]]
===== BÃ i táº­p 4-7

Viáº¿t má»™t báº£n tá»•ng quÃ¡t hÆ¡n so vá»›i +circle+ gá»i lÃ  +arc+ trong Ä‘Ã³ nháº­n thÃªm má»™t tham sá»‘ +angle+, nháº±m chá»‰ Ä‘á»‹nh bao nhiÃªu pháº§n Ä‘Æ°á»ng trÃ²n cáº§n Ä‘Æ°á»£c váº½. +angle+ cÃ³ Ä‘Æ¡n vá»‹ lÃ  Ä‘á»™, vÃ¬ váº­y khi +angle = 360+, +arc+ sáº½ pháº£i váº½ má»™t Ä‘Æ°á»ng trÃ²n.


=== Bao gÃ³i

BÃ i táº­p thá»© nháº¥t yÃªu cáº§u báº¡n Ä‘áº·t Ä‘oáº¡n mÃ£ váº½ hÃ¬nh vuÃ´ng vÃ o trong má»™t Ä‘á»‹nh nghÄ©a hÃ m vÃ  sau Ä‘Ã³ gá»i hÃ m nÃ y, trong Ä‘Ã³ chuyá»ƒn con rÃ¹a nhÆ° má»™t tham biáº¿n. Má»™t cÃ¡ch lÃ m lÃ  nhÆ° sau:
(((square)))((("hÃ m", "tá»± Ä‘á»‹nh nghÄ©a", "square", see="square")))

[source,julia]
----
function square(t)
    for i in 1:4
        forward(t, 100)
        turn(t, -90)
    end
end
ğŸ¢ = Turtle()
@svg begin
    square(ğŸ¢)
end
----

CÃ¡c cÃ¢u lá»‡nh trong cÃ¹ng, +forward+ vÃ  +turn+ Ä‘Æ°á»£c thá»¥t lá» hai láº§n, nháº±m cho tháº¥y chÃºng á»Ÿ bÃªn trong vÃ²ng láº·p +for+, vá»‘n báº£n thÃ¢n á»Ÿ trong Ä‘á»‹nh nghÄ©a hÃ m.
(((thá»¥t lá»)))

BÃªn trong hÃ m, +t+ tham chiáº¿u Ä‘áº¿n cÃ¹ng con rÃ¹a +ğŸ¢+, vÃ¬ váº­y +turn(t, -90)+ cÃ³ cÃ¹ng Ã½ nghÄ©a nhÆ° +turn(ğŸ¢, -90)+. Váº­y táº¡i sao khÃ´ng Ä‘áº·t tÃªn tham biáº¿n lÃ  +ğŸ¢+? ÄÃ³ lÃ  vÃ¬ +t+ cÃ³ thá»ƒ lÃ  báº¥t cá»© con rÃ¹a nÃ o chá»© khÃ´ng riÃªng gÃ¬ +ğŸ¢+, vÃ  báº¡n cÃ³ thá»ƒ táº¡o ra má»™t con rÃ¹a thá»© hai vÃ  truyá»n nÃ³ nhÆ° má»™t Ä‘á»‘i sá»‘ tá»›i +square+:

[source,julia]
----
ğŸ« = Turtle()
@svg begin
    square(ğŸ«)
end
----

Viá»‡c gÃ³i má»™t Ä‘oáº¡n mÃ£ vÃ o trong má»™t hÃ m Ä‘Æ°á»£c gá»i lÃ  _bao gÃ³i_. Má»™t trong nhá»¯ng Æ°u Ä‘iá»ƒm cá»§a viá»‡c bao gÃ³i lÃ  nÃ³ gáº¯n Ä‘oáº¡n mÃ£ vá»›i má»™t tÃªn cá»¥ thá»ƒ, chÃ­nh lÃ  má»™t kiá»ƒu giÃºp cho viá»‡c biÃªn kháº£o sau nÃ y. Má»™t Æ°u Ä‘iá»ƒm khÃ¡c lÃ  náº¿u báº¡n dÃ¹ng láº¡i Ä‘oáº¡n mÃ£, viá»‡c gá»i tÃªn hÃ m sáº½ ngáº¯n gá»n hÆ¡n nhiá»u so vá»›i viá»‡c sao chÃ©p vÃ  dÃ¡n toÃ n bá»™ pháº§n thÃ¢n hÃ m!
(((bao gÃ³i)))


=== KhÃ¡i quÃ¡t hoÃ¡

BÆ°á»›c tiáº¿p theo lÃ  thÃªm má»™t tham sá»‘ +len+ parameter vÃ o +square+. Sau Ä‘Ã¢y lÃ  má»™t giáº£i phÃ¡p:
(((square)))

[source,julia]
----
function square(t, len)
    for i in 1:4
        forward(t, len)
        turn(t, -90)
    end
end
ğŸ¢ = Turtle()
@svg begin
    square(ğŸ¢, 100)
end
----

Viá»‡c thÃªm má»™t tham sá»‘ vÃ o má»™t hÃ m Ä‘Æ°á»£c gá»i lÃ  _khÃ¡i quÃ¡t hoÃ¡_ vÃ¬ nÃ³ lÃ m cho hÃ m sá»‘ trá»Ÿ nÃªn khÃ¡i quÃ¡t hÆ¡n: trong phiÃªn báº£n trÆ°á»›c, kÃ­ch thÆ°á»›c cá»§a hÃ¬nh vuÃ´ng lÃ  cá»‘ Ä‘á»‹nh, á»Ÿ phiÃªn báº£n nÃ y nÃ³ cÃ³ thá»ƒ lá»›n nhá» báº¥t kÃ¬.
(((khÃ¡i quÃ¡t hoÃ¡)))

BÆ°á»›c tiáº¿p theo cÅ©ng lÃ  má»™t cÃ¡ch khÃ¡i quÃ¡t hoÃ¡. Thay vÃ¬ viá»‡c váº½ hÃ¬nh vuÃ´ng, +polygon+ váº½ má»™t hÃ¬nh Ä‘a giÃ¡c Ä‘á»u vá»›i sá»‘ cáº¡nh báº¥t kÃ¬. Sau Ä‘Ã¢y lÃ  má»™t lá»i giáº£i:
(((polygon)))((("hÃ m", "tá»± Ä‘á»‹nh nghÄ©a", "polygon", see="polygon")))

[source,julia]
----
function polygon(t, n, len)
    angle = 360 / n
    for i in 1:n
        forward(t, len)
        turn(t, -angle)
    end
end
ğŸ¢ = Turtle()
@svg begin
    polygon(ğŸ¢, 7, 70)
end
----

Äoáº¡n mÃ£ trÃªn thá»±c hiá»‡n váº½ tháº¥t giÃ¡c Ä‘á»u vá»›i má»—i cáº¡nh dÃ i báº±ng 70.


=== Thiáº¿t káº¿ giao diá»‡n

BÆ°á»›c tiáº¿p theo lÃ  viáº¿t +circle+, trong Ä‘Ã³ nháº­n má»™t tham biáº¿n lÃ  bÃ¡n kÃ­nh +r+. Sau Ä‘Ã¢y lÃ  má»™t lá»i giáº£i Ä‘Æ¡n giáº£n cÃ³ sá»­ dá»¥ng +polygon+ Ä‘á»ƒ váº½ Ä‘a giÃ¡c Ä‘á»u 50 cáº¡nh:
(((circle)))((("hÃ m", "tá»± Ä‘á»‹nh nghÄ©a", "circle", see="circle")))

[source,julia]
----
function circle(t, r)
    circumference = 2 * Ï€ * r
    n = 50
    len = circumference / n
    polygon(t, n, len)
end
----

DÃ²ng Ä‘áº§u tiÃªn nháº±m tÃ­nh toÃ¡n chu vi cá»§a Ä‘Æ°á»ng trÃ²n cÃ³ bÃ¡n kÃ­nh latexmath:[\(r\)] theo cÃ´ng thá»©c latexmath:[\(2 \pi r\)]. +n+ lÃ  sá»‘ Ä‘á»an tháº³ng Ä‘á»ƒ váº½ gáº§n Ä‘Ãºng Ä‘Æ°á»ng trÃ²n, vÃ¬ váº­y +len+ lÃ  chiá»u dÃ i má»—i Ä‘oáº¡n. Do Ä‘Ã³, +polygon+ sáº½ váº½ má»™t Ä‘a giÃ¡c Ä‘á»u cÃ³ 50 cáº¡nh gáº§n khá»›p vá»›i má»™t Ä‘Æ°á»ng trÃ²n cÃ³ bÃ¡n kÃ­nh +r+.

Má»™t háº¡n cháº¿ cá»§a lá»i giáº£i nÃ y lÃ  +n+ pháº£i lÃ  háº±ng sá»‘; Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  vá»›i nhá»¯ng Ä‘Æ°á»ng trÃ²n lá»›n, cÃ¡c Ä‘oáº¡n tháº³ng sáº½ ráº¥t dÃ i, vÃ  vá»›i nhá»¯ng Ä‘Æ°á»ng trÃ²n nhá», chÃºng ta máº¥t thá»i gian Ä‘á»ƒ váº½ quÃ¡ nhiá»u Ä‘oáº¡n tháº³ng ngáº¯n. Má»™t giáº£i phÃ¡p lÃ  khÃ¡i quÃ¡t hoÃ¡ hÃ m nÃ y báº±ng cÃ¡ch nháº­n +n+ lÃ m tham sá»‘. Äiá»u nÃ y giÃºp cho ngÆ°á»i dÃ¹ng (khi gá»i circle) cÃ³ quyá»n lá»±a chá»n tá»‘t hÆ¡n, nhÆ°ng giao diá»‡n cá»§a chÆ°Æ¡ng trÃ¬nh vÃ¬ tháº¿ cÅ©ng kÃ©m pháº§n trong sÃ¡ng.

_Giao diá»‡n_ cá»§a má»™t hÃ m lÃ  pháº§n tÃ³m táº¯t cÃ¡ch dÃ¹ng hÃ m Ä‘Ã³: cÃ¡c tham biáº¿n lÃ  gÃ¬? HÃ m Ä‘Æ°á»£c viáº¿t nháº±m má»¥c Ä‘Ã­ch gÃ¬? VÃ  giÃ¡ trá»‹ Ä‘Æ°á»£c tráº£ láº¡i lÃ  gÃ¬? Má»™t giao diá»‡n â€œtrong sÃ¡ngâ€ náº¿u nÃ³ cho phÃ©p mÃ£ lá»‡nh gá»i Ä‘áº¿n lÃ m Ä‘iá»u mong muá»‘n, mÃ  khÃ´ng pháº£i báº­n tÃ¢m vá» nhá»¯ng chi tiáº¿t khÃ´ng cáº§n thiáº¿t.
(((giao diá»‡n)))

á» vÃ­ dá»¥ nÃ y, +r+ pháº£i thuá»™c vá» giao diá»‡n vÃ¬ nÃ³ chi phá»‘i Ä‘Æ°á»ng trÃ²n cáº§n Ä‘Æ°á»£c váº½. CÃ²n +n+ thÃ¬ Ã­t cÃ³ lÃ­ hÆ¡n vÃ¬ nÃ³ liÃªn quan Ä‘áº¿n nhá»¯ng chi tiáº¿t gáº¯n vá»›i cÃ¡ch váº½ Ä‘Æ°á»ng trÃ²n Ä‘Ã³.

Thay vÃ¬ viá»‡c lÃ m lá»™n xá»™n giao diá»‡n, tá»‘t hÆ¡n lÃ  ta chá»n má»™t giÃ¡ trá»‹ há»£p lÃ­ cho +n+ tuá»³ thuá»™c vÃ o chu vi +circumference+:

[source,julia]
----
function circle(t, r)
    circumference = 2 * Ï€ * r
    n = trunc(circumference / 3) + 3
    len = circumference / n
    polygon(t, n, len)
end
----

BÃ¢y giá» sá»‘ cáº¡nh xáº¥p xá»‰ báº±ng +circumference/3+, nhÆ° váº­y má»—i cáº¡nh cÃ³ Ä‘á»™ dÃ i xáº¥p xá»‰ báº±ng 3, tá»©c lÃ  Ä‘á»§ nhá» Ä‘á»ƒ cho Ä‘Æ°á»ng trÃ²n Ä‘Æ°á»£c Ä‘áº¹p, nhÆ°ng cÅ©ng Ä‘á»§ lá»›n Ä‘á»ƒ mÃ£ lá»‡nh Ä‘Æ°á»£c hiá»‡u quáº£, vÃ  phÃ¹ há»£p vá»›i má»i kÃ­ch cá»¡ Ä‘Æ°á»ng trÃ²n.

Viá»‡c cá»™ng 3 vÃ o +n+ Ä‘áº£m báº£o ráº±ng Ä‘a giÃ¡c cÃ³ Ã­t nháº¥t lÃ  3 cáº¡nh.


[[refactoring]]
=== Chá»‰nh Ä‘á»‘n

Khi viáº¿t circle, tÃ´i cÃ³ thá»ƒ dÃ¹ng +polygon+ vÃ¬ má»™t Ä‘a giÃ¡c Ä‘á»u nhiá»u cáº¡nh cÃ³ thá»ƒ gáº§n khá»›p vá»›i má»™t Ä‘Æ°á»ng trÃ²n. NhÆ°ng +arc+ thÃ¬ khÃ´ng phÃ¹ há»£p; ta khÃ´ng dÃ¹ng Ä‘Æ°á»£c +polygon+ hoáº·c +circle+ Ä‘á»ƒ váº½ má»™t cung trÃ²n.

Má»™t cÃ¡ch lÃ m khÃ¡c lÃ  báº¯t Ä‘áº§u báº±ng má»™t báº£n sao cá»§a +polygon+ vÃ  biáº¿n Ä‘á»•i nÃ³ vá» thÃ nh +arc+. Káº¿t quáº£ cÃ³ thá»ƒ lÃ  nhÆ° sau:
(((arc)))((("hÃ m", "tá»± Ä‘á»‹nh nghÄ©a", "arc", see="arc")))

[source,julia]
----
function arc(t, r, angle)
    arc_len = 2 * Ï€ * r * angle / 360
    n = trunc(arc_len / 3) + 1
    step_len = arc_len / n
    step_angle = angle / n
    for i in 1:n
        forward(t, step_len)
        turn(t, -step_angle)
    end
end
----

Ná»­a sau cá»§a hÃ m nÃ y trÃ´ng giá»‘ng nhÆ° +polygon+, nhÆ°ng ta khÃ´ng thá»ƒ dÃ¹ng láº¡i +polygon+ mÃ  khÃ´ng thay Ä‘á»•i giao diá»‡n. Ta cÃ³ thá»ƒ khÃ¡i quÃ¡t hoÃ¡ +polygon+ Ä‘á»ƒ nháº­n vÃ o tham sá»‘ thá»© ba lÃ  gÃ³c, nhÆ° khi Ä‘Ã³ +polygon+ láº¡i khÃ´ng cÃ²n lÃ  má»™t tÃªn gá»i phÃ¹ há»£p ná»¯a! Thay vÃ o Ä‘Ã³, hÃ£y gá»i hÃ m vá»›i tÃªn +polyline+ Ä‘á»ƒ khÃ¡i quÃ¡t hÆ¡n:
(((polyline)))((("hÃ m", "tá»± Ä‘á»‹nh nghÄ©a", "polyline", see="polyline")))

[source,julia]
----
function polyline(t, n, len, angle)
    for i in 1:n
        forward(t, len)
        turn(t, -angle)
    end
end
----

BÃ¢y giá» ta cÃ³ thá»ƒ viáº¿t láº¡i +polygon+ vÃ  +arc+ cÃ³ dÃ¹ng +polyline+:
(((polygon)))(((arc)))

[source,julia]
----
function polygon(t, n, len)
    angle = 360 / n
    polyline(t, n, len, angle)
end

function arc(t, r, angle)
    arc_len = 2 * Ï€ * r * angle / 360
    n = trunc(arc_len / 3) + 1
    step_len = arc_len / n
    step_angle = angle / n
    polyline(t, n, step_len, step_angle)
end
----

Sau cÃ¹ng, ta cÃ³ thá»ƒ viáº¿t láº¡i +circle+ cÃ³ dÃ¹ng +arc+:
(((circle)))

[source,julia]
----
function circle(t, r)
    arc(t, r, 360)
end
----

QuÃ¡ trÃ¬nh nÃ yâ€”viá»‡c sáº¯p xáº¿p láº¡i chÆ°Æ¡ng trÃ¬nh Ä‘á»ƒ cáº£i thiá»‡n giao diá»‡n cá»§a hÃ m vÃ  giÃºp cho sá»­ dá»¥ng láº¡i mÃ£ lá»‡nhâ€” Ä‘Æ°á»£c gá»i lÃ  _chá»‰nh Ä‘á»‘n_. Trong trÆ°á»ng há»£p nÃ y, ta Ä‘Ã£ nháº­n tháº¥y ráº±ng cÃ³ sá»± tÆ°Æ¡ng Ä‘á»“ng trong mÃ£ lá»‡nh cá»§a +arc+ vÃ  +polygon+, vÃ¬ váº­y ta Ä‘Ã£ chá»‰nh Ä‘á»‘n láº¡i báº±ng cÃ¡ch Ä‘Æ°a pháº§n chung nÃ y vÃ o trong +polyline+.
(((chá»‰nh Ä‘á»‘n)))

Náº¿u Ä‘Ã£ cÃ³ káº¿ hoáº¡ch tá»« trÆ°á»›c, cÃ³ thá»ƒ ta Ä‘Ã£ viáº¿t +polyline+ tá»« Ä‘áº§u vÃ  trÃ¡nh viá»‡c chá»‰nh Ä‘á»‘n, nhÆ°ng thÆ°á»ng thÃ¬ vÃ o thá»i Ä‘iá»ƒm báº¯t Ä‘áº§u dá»± Ã¡n báº¡n khÃ´ng biáº¿t rÃµ Ä‘á»ƒ thiáº¿t káº¿ Ä‘Æ°á»£c toÃ n bá»™ giao diá»‡n. Má»™t khi Ä‘Ã£ báº¯t tay vÃ o viáº¿t mÃ£ lá»‡nh, báº¡n hiá»ƒu hÆ¡n vá» váº¥n Ä‘á» cáº§n giáº£i quyáº¿t. ÄÃ´i khi viá»‡c chá»‰nh Ä‘á»‘n lÃ  má»™t tÃ­n hiá»‡u cho tháº¥y báº¡n Ä‘Ã£ há»c Ä‘Æ°á»£c má»™t Ä‘iá»u gÃ¬ Ä‘Ã³.


=== Má»™t káº¿ hoáº¡ch phÃ¡t triá»ƒn

Má»™t _káº¿ hoáº¡ch phÃ¡t triá»ƒn_ lÃ  má»™t quÃ¡ trÃ¬nh trong viá»‡c láº­p trÃ¬nh. á» Ä‘Ã¢y ta sáº½ dÃ¹ng kÄ© thuÃ¢t â€œbao gÃ³i vÃ  khÃ¡i quÃ¡t hoÃ¡â€. CÃ¡c bÆ°á»›c trong quÃ¡ trÃ¬nh nÃ y gá»“m cÃ³:
(((káº¿ hoáº¡ch phÃ¡t triá»ƒn chÆ°Æ¡ng trÃ¬nh)))

. Báº¯t Ä‘áº§u báº±ng viá»‡c viáº¿t chÆ°Æ¡ng trÃ¬nh nhá» mÃ  khÃ´ng Ä‘á»‹nh nghÄ©a hÃ m.

. Má»™t khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘Ã£ cháº¡y, hÃ£y Ä‘Ã³ng gÃ³i nÃ³ vÃ o trong má»™t hÃ m vÃ  Ä‘áº·t tÃªn cho hÃ m nÃ y.

. KhÃ¡i quÃ¡t hoÃ¡ hÃ m báº±ng cÃ¡ch thÃªm vÃ o cÃ¡c tham sá»‘ má»™t cÃ¡ch thÃ­ch há»£p.

. Láº·p láº¡i cÃ¡c bÆ°á»›c 1â€“3 Ä‘áº¿n khi báº¡n cÃ³ má»™t nhÃ³m cÃ¡c hÃ m cháº¡y Ä‘Æ°á»£c. HÃ£y sao chÃ©p vÃ  dÃ¡n cÃ¡c Ä‘oáº¡n mÃ£ lá»‡nh tá»‘t Ä‘Ã³ Ä‘á»ƒ khá»i Ä‘Ã¡nh mÃ¡y láº¡i (vÃ  gá»¡ lá»—i láº¡i).

. TÃ¬m má»i cÆ¡ há»™i Ä‘á»ƒ cáº£i thiá»‡n chÆ°Æ¡ng trÃ¬nh báº±ng cÃ¡ch chá»‰nh Ä‘á»‘n. Cháº³ng háº¡n, náº¿u báº¡n cÃ³ Ä‘oáº¡n mÃ£ lá»‡nh tÆ°Æ¡ng tá»± á»Ÿ má»™t vÃ i chá»— trong chÆ°Æ¡ng trÃ¬nh, hÃ£y xÃ©t xem cÃ³ thá»ƒ chá»‰nh Ä‘á»‘n báº±ng viá»‡c Ä‘Æ°a nÃ³ vÃ o má»™t hÃ m chung hay khÃ´ng.

QuÃ¡ trÃ¬nh nÃ y cÃ³ má»™t sá»‘ háº¡n cháº¿â€”ta sáº½ tháº¥y cÃ¡c giáº£i phÃ¡p khÃ¡c trong pháº§n sau quyá»ƒn sÃ¡châ€”nhÆ°ng cÃ³ thá»ƒ nÃ³ sáº½ cÃ³ Ã­ch náº¿u báº¡n khÃ´ng biáº¿t trÆ°á»›c Ä‘Æ°á»£c viá»‡c chia chÆ°Æ¡ng trÃ¬nh thÃ nh cÃ¡c hÃ m nhÆ° tháº¿ nÃ o cho há»£p lÃ­. PhÆ°Æ¡ng phÃ¡p nÃ y giÃºp báº¡n thiáº¿t káº¿ trong lÃºc báº¡n viáº¿t chÆ°Æ¡ng trÃ¬nh.


=== Docstring

_Docstring_ lÃ  má»™t chuá»—i Ä‘Æ°á»£c Ä‘áº·t trÆ°á»›c má»™t hÃ m cÃ³ nhiá»‡m vá»¥ giáº£i thÃ­ch giao diá»‡n (â€œdocâ€ lÃ  gá»i táº¯t cho tá»« â€œdocumentationâ€, vÄƒn báº£n). Sau Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥:
(((docstring)))(((ba nhÃ¡y kÃ©p)))((("pass:[&quot;&quot;&quot;]", see="ba nhÃ¡y kÃ©p")))

[source,julia]
----
"""
polyline(t, n, len, angle)

Váº½ n Ä‘oáº¡n tháº³ng vá»›i chiá»u dÃ i cho trÆ°á»›c vÃ  gÃ³c
(tÃ­nh báº±ng Ä‘á»™) giá»¯a chÃºng.  t lÃ  má»™t Turtle.
"""
function polyline(t, n, len, angle)
    for i in 1:n
        forward(t, len)
        turn(t, -angle)
    end
end
----

Ná»™i dung pháº§n giáº£i thÃ­ch nÃ y cÃ³ thá»ƒ truy cáº­p Ä‘Æ°á»£c tá»« REPL hoáº·c sá»• tÃ­nh báº±ng cÃ¡ch gÃµ ? tiáº¿p theo lÃ  tÃªn cá»§a hÃ m hoáº·c macro, vÃ  nháº¥n +ENTER+:
(((trá»£ giÃºp)))((("?", see="trá»£ giÃºp")))

----
help?> polyline
search:

  polyline(t, n, len, angle)

  Váº½ n Ä‘oáº¡n tháº³ng vá»›i chiá»u dÃ i cho trÆ°á»›c vÃ  gÃ³c (tÃ­nh báº±ng Ä‘á»™) giá»¯a chÃºng.  t lÃ  má»™t Turtle.
----

Docstring thÆ°á»ng lÃ  chuá»—i Ä‘áº·t trong ba dáº¥u nhÃ¡y, cÅ©ng Ä‘Æ°á»£c gá»i lÃ  chuá»—i nhiá»u dÃ²ng vÃ¬ ba dáº¥u nhÃ¡y cho phÃ©p chuá»—i kÃ©o dÃ i qua nhiá»u dÃ²ng liÃªn tiáº¿p.

Docstring nÃ y chá»©a Ä‘áº§y Ä‘á»§ táº¥t cáº£ nhá»¯ng thÃ´ng tin thiáº¿t yáº¿u cho ngÆ°á»i cáº§n dÃ¹ng Ä‘áº¿n hÃ m nÃ y. NÃ³ giáº£i thÃ­ch má»™t cÃ¡ch cÃ´ Ä‘á»ng hÃ m nÃ y cÃ³ nhiá»‡m vá»¥ gÃ¬ (mÃ  khÃ´ng nÃ³i chi tiáº¿t ráº±ng hÃ m thá»±c hiá»‡n báº±ng cÃ¡ch nÃ o). NÃ³ giáº£i thÃ­ch áº£nh hÆ°á»Ÿng cá»§a má»—i tham biáº¿n Ä‘á»‘i vá»›i biá»ƒu hiá»‡n cá»§a hÃ m vÃ  má»—i tham biáº¿n cÃ³ kiá»ƒu lÃ  gÃ¬ (trong trÆ°á»ng há»£p khÃ´ng rÃµ rÃ ng).

[TIP]
====
Viá»‡c ghi chÃ©p nÃ y lÃ  má»™t pháº§n quan trá»ng trong thiáº¿t káº¿ giao diá»‡n. Má»™t giao diá»‡n Ä‘Æ°á»£c thiáº¿t káº¿ tá»‘t pháº£i lÃ  giao diá»‡n ráº¥t dá»… giáº£i thÃ­ch; náº¿u báº¡n gáº·p khÃ³ khÄƒn khi giáº£i thÃ­ch cÃ¡c hÃ m mÃ  báº¡n viáº¿t ra thÃ¬ Ä‘Ã³ cÃ³ thá»ƒ lÃ  dáº¥u hiá»‡u cho tháº¥y giao diá»‡n cá»§a báº¡n cÃ³ thá»ƒ pháº£i Ä‘Æ°á»£c cáº£i thiá»‡n.
====


=== Gá»¡ lá»—i

Má»™t giao diá»‡n cÅ©ng tá»±a nhÆ° má»™t giao kÃ¨o giá»¯a hÃ m vÃ  chÆ°Æ¡ng trÃ¬nh gá»i. ChÆ°Æ¡ng trÃ¬nh Ä‘á»“ng Ã½ cung cáº¥p nhá»¯ng tham biáº¿n nháº¥t Ä‘á»‹nh cÃ²n hÃ m thÃ¬ Ä‘á»“ng Ã½ thá»±c hiá»‡n má»™t viá»‡c nháº¥t Ä‘á»‹nh.
(((gá»¡ lá»—i)))

Cháº³ng háº¡n, +polyline+ Ä‘Ã²i há»i bá»‘n Ä‘á»‘i sá»‘: +t+ pháº£i lÃ  má»™t con rÃ¹a; +n+ pháº£i lÃ  má»™t sá»‘ nguyÃªn; +len+ pháº£i lÃ  má»™t sá»‘ dÆ°Æ¡ng; cÃ²n +angle+ pháº£i lÃ  má»™t sá»‘ vÃ  Ä‘Æ°á»£c hiá»ƒu lÃ  tÃ­nh báº±ng Ä‘á»™.

CÃ¡c yÃªu cáº§u trÃªn Ä‘Æ°á»£c gá»i lÃ  nhá»¯ng _Ä‘iá»u kiá»‡n tiá»n Ä‘á»_ vÃ¬ chÃºng cáº§n Ä‘Æ°á»£c Ä‘áº£m báº£o lÃ  Ä‘Ãºng trÆ°á»›c khi hÃ m Ä‘Æ°á»£c thá»±c hiá»‡n. TrÃ¡i láº¡i, cÃ¡c Ä‘iá»u kiá»‡n á»Ÿ cuá»‘i hÃ m Ä‘Æ°á»£c gá»i lÃ  _tráº¡ng thÃ¡i sau_. CÃ¡c tráº¡ng thÃ¡i sau gá»“m cÃ³ nhá»¯ng hiá»‡u á»©ng Ä‘Æ°á»£c mong Ä‘á»£i cá»§a hÃ m (nhÆ° viá»‡c váº½ cÃ¡c Ä‘oáº¡n tháº³ng) vÃ  báº¥t kÃ¬ hiá»‡u á»©ng phá»¥ nÃ o khÃ¡c (nhÆ° di chuyá»ƒn rÃ¹a hoáº·c thá»±c hiá»‡n thay Ä‘á»•i gÃ¬ Ä‘Ã³).
(((Ä‘iá»u kiá»‡n tiá»n Ä‘á»)))(((tráº¡ng thÃ¡i sau)))

CÃ¡c Ä‘iá»u kiá»‡n tiá»n Ä‘á» thuá»™c vá» trÃ¡ch nhiá»‡m cá»§a chÆ°Æ¡ng trÃ¬nh gá»i. Náº¿u chÆ°Æ¡ng trÃ¬nh vi pháº¡m má»™t Ä‘iá»u kiá»‡n tiá»n Ä‘á» (Ä‘Ã£ Ä‘Æ°á»£c viáº¿t rÃµ á»Ÿ docstring) vÃ  hÃ m khÃ´ng thá»±c hiá»‡n Ä‘Æ°á»£c viá»‡c, thÃ¬ lá»—i thuá»™c vá» chÆ°Æ¡ng trÃ¬nh gá»i chá»© khÃ´ng thuá»™c vá» hÃ m.

Náº¿u cÃ¡c Ä‘iá»u kiá»‡n tiá»n Ä‘á» Ä‘Æ°á»£c thá»a mÃ£n nhÆ°ng tráº¡ng thÃ¡i sau thÃ¬ khÃ´ng, khi Ä‘Ã³ lá»—i náº±m trong hÃ m. Náº¿u báº¡n dÃ£ nÃªu rÃµ Ä‘iá»u kiá»‡n tiá»n Ä‘á» vÃ  tráº¡ng thÃ¡i sau, thÃ¬ chÃºng cÃ³ thá»ƒ giÃºp báº¡n gá»¡ lá»—i.


=== Thuáº­t ngá»¯

module::
Má»™t file chá»©a nhÃ³m cÃ¡c hÃ m liÃªn quan cÃ¹ng nhá»¯ng Ä‘á»‹nh nghÄ©a khÃ¡c.
(((module)))

gÃ³i::
Má»™t thÆ° viá»‡n bÃªn ngoÃ i vá»›i nhá»¯ng tÃ­nh nÄƒng phá»¥ thÃªm.
(((gÃ³i)))

lá»‡nh using::
Lá»‡nh Ä‘á»c vÃ o má»™t file module vÃ  táº¡o Ä‘á»‘i tÆ°á»£ng module.
(((lá»‡nh using)))

vÃ²ng láº·p::
Má»™t pháº§n cá»§a chÆ°Æ¡ng trÃ¬nh Ä‘Æ°á»£c thá»±c hiá»‡n láº·p Ä‘i láº·p láº¡i.
(((vÃ²ng láº·p)))

bao gÃ³i::
QuÃ¡ trÃ¬nh Ä‘Æ°a má»™t dÃ£y cÃ¡c cÃ¢u lá»‡nh vÃ o trong bÃªn má»™t Ä‘á»‹nh nghÄ©a hÃ m.
(((bao gÃ³i)))

khÃ¡i quÃ¡t hoÃ¡::
QuÃ¡ trÃ¬nh thay tháº¿ má»™t thá»© riÃªng biá»‡t má»™t cÃ¡ch khÃ´ng cáº§n thiáº¿t (cháº³ng háº¡n má»™t con sá»‘) vá»›i má»™t thá»© khÃ¡i quÃ¡t thÃ­ch há»£p (nhÆ° má»™t biáº¿n hoáº·c tham sá»‘).
(((khÃ¡i quÃ¡t hoÃ¡)))

giao diá»‡n::
Má»™t Ä‘oáº¡n mÃ´ táº£ cÃ¡ch dÃ¹ng má»™t hÃ m, bao gá»“m tÃªn vÃ  lá»i mÃ´ táº£ cÃ¡c Ä‘á»‘i sá»‘ cÃ¹ng giÃ¡ trá»‹ Ä‘Æ°á»£c tráº£ vá».
(((giao diá»‡n)))

chá»‰nh Ä‘á»‘n::
QuÃ¡ trÃ¬nh sá»­a Ä‘á»•i má»™t chÆ°Æ¡ng trÃ¬nh dÃ£ cháº¡y Ä‘Æ°á»£c nháº±m cáº£i thiá»‡n giao diá»‡n hÃ m cÅ©ng nhÆ° cÃ¡c cháº¥t lÆ°á»£ng khÃ¡c cá»§a mÃ£ lá»‡nh.
(((chá»‰nh Ä‘á»‘n)))

káº¿ hoáº¡ch phÃ¡t triá»ƒn::
Má»™t quy trÃ¬nh Ä‘á»ƒ viáº¿t chÆ°Æ¡ng trÃ¬nh mÃ¡y tÃ­nh.
(((káº¿ hoáº¡ch phÃ¡t triá»ƒn chÆ°Æ¡ng trÃ¬nh)))

docstring::
Má»™t chuá»—i xuáº¥t hiá»‡n ngay trÆ°á»›c lá»i Ä‘á»‹nh nghÄ©a hÃ m nháº±m ghi chÃ©p láº¡i giao diá»‡n cá»§a hÃ m Ä‘Ã³.
(((docstring)))

Ä‘iá»u kiá»‡n tiá»n Ä‘á»::
Má»™t yÃªu cáº§u cáº§n Ä‘Æ°á»£c thoáº£ mÃ£n bá»Ÿi chÆ°Æ¡ng trÃ¬nh gá»i trÆ°á»›c khi hÃ m Ä‘Æ°á»£c thá»±c hiá»‡n.
(((Ä‘iá»u kiá»‡n tiá»n Ä‘á»)))

tráº¡ng thÃ¡i sau::
Má»™t Ä‘iá»u kiá»‡n cáº§n Ä‘Æ°á»£c hÃ m thoáº£ mÃ£n trÆ°á»›c khi nÃ³ káº¿t thÃºc.
(((tráº¡ng thÃ¡i sau)))


=== BÃ i táº­p

[[ex04-7]]
===== BÃ i táº­p 4-8

HÃ£y nháº­p mÃ£ lá»‡nh trong chÆ°Æ¡ng nÃ y vÃ o má»™t cuá»‘n sá»• tÃ­nh.

. Váº½ má»™t sÆ¡ Ä‘á»“ ngÄƒn xáº¿p trong Ä‘Ã³ chá»‰ ra tráº¡ng thÃ¡i cá»§a chÆ°Æ¡ng trÃ¬nh khi cháº¡y +circle(ğŸ¢, radius)+. Báº¡n cÃ³ thá»ƒ tÃ­nh tay hoáº·c thÃªm vÃ o cÃ¡c lá»‡nh print kÃ¨m theo mÃ£ lá»‡nh.

. PhiÃªn báº£n +arc+ á»Ÿ <<refactoring>> khÃ´ng chÃ­nh xÃ¡c láº¯m vÃ¬ cÃ¡ch xáº¥p xá»‰ Ä‘oáº¡n tháº³ng nÃ y luÃ´n náº±m ngoÃ i Ä‘Æ°á»ng trÃ²n Ä‘Ãºng. Do Ä‘Ã³, con rÃ¹a Ä‘Ã£ dá»«ng láº¡i á»Ÿ cÃ¡ch Ä‘Ã­ch cuá»‘i cÃ¹ng má»™t vÃ i Ä‘iá»ƒm. CÃ¡ch lÃ m cá»§a tÃ´i Ä‘Ã£ giáº£m Ä‘i sai lá»‡ch nÃ y. HÃ£y Ä‘á»c mÃ£ lá»‡nh vÃ  cá»‘ gáº¯ng hiá»ƒu nÃ³. Báº¡n cÃ³ thá»ƒ váº½ biá»ƒu Ä‘á»“ vÃ  xem cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng cá»§a cÃ¡ch nÃ y.
(((arc)))

[source,julia]
----
"""
arc(t, r, angle)

Draws an arc with the given radius and angle:

    t: turtle
    r: radius
    angle: angle subtended by the arc, in degrees
"""
function arc(t, r, angle)
    arc_len = 2 * Ï€ * r * abs(angle) / 360
    n = trunc(arc_len / 4) + 3
    step_len = arc_len / n
    step_angle = angle / n

    # making a slight left turn before starting reduces
    # the error caused by the linear approximation of the arc
    turn(t, -step_angle/2)
    polyline(t, n, step_len, step_angle)
    turn(t, step_angle/2)
end
----

[[ex04-8]]
===== BÃ i táº­p 4-9

Viáº¿t má»™t nhÃ³m cÃ¡c hÃ m tá»•ng quÃ¡t Ä‘á»ƒ váº½ nhá»¯ng bÃ´ng hoa nhÆ° <<fig04-2>>.

[[fig04-2]]
.BÃ´ng hoa váº½ báº±ng con rÃ¹a
image::images/fig42.svg[]

[[ex04-9]]
===== BÃ i táº­p 4-10

Viáº¿t má»™t nhÃ³m cÃ¡c hÃ m tá»•ng quÃ¡t Ä‘á»ƒ váº½ nhá»¯ng hÃ¬nh nhÆ° <<fig04-3>>.

[[fig04-3]]
.HÃ¬nh quáº¡t váº½ báº±ng con rÃ¹a
image::images/fig43.svg[]

[[ex04-10]]
===== BÃ i táº­p 4-11

CÃ¡c chá»¯ cÃ¡i trong báº£ng chá»¯ cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¢y dá»±ng tá»« má»™t sá»‘ Ä‘á»§ nhiá»u cÃ¡c thÃ nh pháº§n cÆ¡ báº£n, nhÆ° nhá»¯ng Ä‘Æ°á»ng tháº³ng Ä‘á»©ng, Ä‘Æ°á»ng ngang, vÃ  Ä‘Æ°á»ng cong. HÃ£y thiáº¿t káº¿ má»™t bá»™ phÃ´ng chá»¯ mÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c váº½ vá»›i má»™t sá»‘ tá»‘t thiá»ƒu cÃ¡c thÃ nh pháº§n cÆ¡ báº£n nhÆ° váº­y; rá»“i viáº¿t cÃ¡c hÃ m thá»±c hiá»‡n viá»‡c váº½ chá»¯ cÃ¡i.

Báº¡n nÃªn tá»«ng hÃ m riÃªng cho má»—i chá»¯ cÃ¡i, vá»›i tÃªn hÃ m nhÆ° +draw_a+, +draw_b+, v.v., vÃ  Ä‘áº·t chung cÃ¡c hÃ m vÃ o má»™t file cÃ³ tÃªn lÃ  _letters.jl_.

[[ex04-11]]
===== BÃ i táº­p 4-12

Äá»c thÃªm vá» cÃ¡c Ä‘Æ°á»ng xoÃ¡y á»‘c tá»« trang https://en.wikipedia.org/wiki/Spiral; rá»“i viáº¿t chÆ°Æ¡ng trÃ¬nh váº½ nÃªn Ä‘Æ°á»ng xoÃ¡y á»‘c Archimede nhÆ° <<fig04-4>>.

[[fig04-4]]
.XoÃ¡y á»‘c Archimede
image::images/fig44.svg[]
